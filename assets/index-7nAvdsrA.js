import{r as e}from"./rolldown-runtime-DGruFWvd.js";import{i as t,n,t as r}from"./react-CFDLd8UE.js";import{a as i,c as a,i as o,l as s,n as c,o as l,r as u,s as d,t as f}from"./recharts-Ba3-sPUH.js";import{t as p}from"./vendor-html-to-image-RVQW7iFO.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var m=e(n(),1),h=e(t(),1),g={variations:[{name:`Original`},{id:10001,name:`Variation A`},{id:10002,name:`Variation B`},{id:10003,name:`Variation C`}],data:[{date:`2025-01-01`,visits:{0:1866,10002:1957,10003:1750},conversions:{0:158,10002:463,10003:491}},{date:`2025-01-02`,visits:{0:1547,10002:1968,10003:1160},conversions:{0:173,10002:504,10003:320}},{date:`2025-01-03`,visits:{0:1125,10002:1642,10003:1775},conversions:{0:120,10002:413,10003:473}},{date:`2025-01-04`,visits:{0:1779,10002:1763,10003:1031},conversions:{0:243,10002:404,10003:257}},{date:`2025-01-05`,visits:{0:1276,10002:1634,10003:1101},conversions:{0:150,10002:344,10003:246}},{date:`2025-01-06`,visits:{0:1479,10001:1502,10002:1388,10003:1661},conversions:{0:172,10001:271,10002:280,10003:326}},{date:`2025-01-07`,visits:{0:1409,10001:1400,10002:1347,10003:1616},conversions:{0:199,10001:227,10002:252,10003:261}},{date:`2025-01-08`,visits:{0:1756,10001:1229,10002:1053,10003:1629},conversions:{0:216,10001:191,10002:153,10003:219}},{date:`2025-01-09`,visits:{0:1981,10001:1781,10002:1322,10003:1659},conversions:{0:244,10001:267,10002:168,10003:166}},{date:`2025-01-10`,visits:{0:1345,10001:1672,10002:1574,10003:1525},conversions:{0:149,10001:200,10002:174,10003:121}},{date:`2025-01-11`,visits:{0:1542,10001:1283,10002:1424,10003:1189},conversions:{0:141,10001:141,10002:129,10003:64}},{date:`2025-01-12`,visits:{0:1539,10001:1084,10002:1558,10003:1142},conversions:{0:135,10001:84,10002:97,10003:153}},{date:`2025-01-13`,visits:{0:1099,10001:1832,10002:1410,10003:1353},conversions:{0:73,10001:282,10002:131,10003:59}},{date:`2025-01-14`,visits:{0:1842,10001:1413,10002:1821,10003:1885},conversions:{0:108,10001:63,10002:93,10003:108}},{date:`2025-01-15`,visits:{0:1069,10001:1867,10003:1154},conversions:{0:137,10001:75,10003:68}},{date:`2025-01-16`,visits:{0:1271,10001:1676,10003:1839},conversions:{0:53,10001:55,10003:274}},{date:`2025-01-17`,visits:{0:1845,10001:1057,10003:1639},conversions:{0:32,10001:47,10003:183}},{date:`2025-01-18`,visits:{0:1463,10001:1483,10002:1830,10003:1497},conversions:{0:35,10001:36,10002:128,10003:207}},{date:`2025-01-19`,visits:{0:1088,10001:1720,10002:1721,10003:1796},conversions:{0:35,10001:74,10002:169,10003:286}},{date:`2025-01-20`,visits:{0:1684,10001:1515,10002:1471,10003:1286},conversions:{0:36,10001:73,10002:158,10003:259}},{date:`2025-01-21`,visits:{0:1105,10001:1800,10002:1040,10003:1785},conversions:{0:45,10001:135,10002:146,10003:401}},{date:`2025-01-22`,visits:{0:1413,10001:1737,10002:1958,10003:1161},conversions:{0:66,10001:134,10002:311,10003:286}},{date:`2025-01-23`,visits:{0:1470,10001:1405,10002:1413,10003:1697},conversions:{0:94,10001:154,10002:276,10003:477}},{date:`2025-01-24`,visits:{0:1015,10001:1555,10002:1320,10003:1977},conversions:{0:75,10001:365,10002:273,10003:565}},{date:`2025-01-25`,visits:{0:1292,10001:1994,10002:1879,10003:1755},conversions:{0:107,10001:269,10002:433,10003:497}},{date:`2025-01-26`,visits:{0:1128,10001:1714,10002:1786,10003:0},conversions:{0:96,10001:289,10002:416,10003:0}},{date:`2025-01-27`,visits:{0:1691,10001:1085,10002:1147,10003:0},conversions:{0:175,10001:190,10002:284,10003:0}},{date:`2025-01-28`,visits:{0:1001,10001:1238,10002:1002,10003:0},conversions:{0:114,10001:225,10002:234,10003:0}},{date:`2025-01-29`,visits:{0:1213,10001:1546,10002:1224,10003:0},conversions:{0:158,10001:275,10002:288,10003:0}},{date:`2025-01-30`,visits:{0:1404,10001:1257,10002:1428,10003:0},conversions:{0:189,10001:232,10002:312,10003:0}},{date:`2025-01-31`,visits:{0:1986,10001:1084,10002:1607,10003:0},conversions:{0:234,10001:206,10002:346,10003:0}}]},_=1440*60*1e3;function v(e){return e.variations.map(e=>({id:e.id===void 0?`0`:String(e.id),name:e.name}))}function y(e,t){return e.data.map(e=>{let n=new Date(e.date+`T00:00:00Z`),r={};for(let n of t){let t=n.id,i=e.visits[t],a=e.conversions[t];i!=null&&i>0&&a!=null?r[t]=a/i*100:r[t]=null}return{date:n,dateLabel:e.date,values:r}}).sort((e,t)=>e.date.getTime()-t.date.getTime())}function b(e,t){if(!e.data.length)return[];let n=[...e.data].sort((e,t)=>e.date.localeCompare(t.date)),r=new Date(n[0].date+`T00:00:00Z`),i=[];for(let e of n){let n=new Date(e.date+`T00:00:00Z`),a=Math.floor((n.getTime()-r.getTime())/_),o=Math.floor(a/7);i[o]||(i[o]={startDate:new Date(r.getTime()+o*7*_),visits:{},conversions:{}});let s=i[o];for(let n of t){let t=n.id,r=e.visits[t],i=e.conversions[t];r!=null&&i!=null&&(s.visits[t]=(s.visits[t]??0)+r,s.conversions[t]=(s.conversions[t]??0)+i)}}return i.map((e,n)=>{let r={};for(let n of t){let t=n.id,i=e.visits[t],a=e.conversions[t];i!=null&&i>0&&a!=null?r[t]=a/i*100:r[t]=null}return{date:e.startDate,dateLabel:`Week ${n+1}`,values:r}})}function x(e){let t=v(e);return{variations:t,dailyPoints:y(e,t),weeklyPoints:b(e,t)}}function S(e,t=1){return e==null||Number.isNaN(e)?`-`:`${e.toFixed(t).replace(`.`,`,`)}%`}function C(e){return e.toLocaleDateString(`en-GB`,{day:`2-digit`,month:`short`})}function w(e){return e.toLocaleDateString(`en-GB`,{day:`2-digit`,month:`2-digit`,year:`numeric`})}var T={chartWrapper:`_chartWrapper_19ywl_1`},E={tooltip:`_tooltip_lavek_1`,header:`_header_lavek_13`,calendarIcon:`_calendarIcon_lavek_20`,date:`_date_lavek_47`,divider:`_divider_lavek_52`,rows:`_rows_lavek_58`,row:`_row_lavek_58`,left:`_left_lavek_77`,dot:`_dot_lavek_84`,variationName:`_variationName_lavek_91`,trophy:`_trophy_lavek_97`,value:`_value_lavek_102`},D=e(r(),1);const O=e=>{let{active:t,payload:n,label:r,variations:i}=e;if(!t||!n||n.length===0)return null;let a=n[0].payload,o=a.dateFull||r||``,s=null,c=-1/0;for(let e of i){let t=a[e.id];t!=null&&!Number.isNaN(t)&&t>c&&(c=t,s=e.id)}return(0,D.jsxs)(`div`,{className:E.tooltip,children:[(0,D.jsxs)(`div`,{className:E.header,children:[(0,D.jsx)(`div`,{className:E.calendarIcon}),(0,D.jsx)(`span`,{className:E.date,children:o})]}),(0,D.jsx)(`div`,{className:E.divider}),(0,D.jsx)(`div`,{className:E.rows,children:i.map(e=>{let t=a[e.id],r=n.find(t=>t.dataKey===e.id)?.color||`#999999`,i=s===e.id;return(0,D.jsxs)(`div`,{className:E.row,children:[(0,D.jsxs)(`div`,{className:E.left,children:[(0,D.jsx)(`span`,{className:E.dot,style:{backgroundColor:r}}),(0,D.jsx)(`span`,{className:E.variationName,children:e.name}),i&&(0,D.jsx)(`span`,{className:E.trophy,title:`Best variation`,children:`ðŸ†`})]}),(0,D.jsx)(`div`,{className:E.value,children:S(t,2)})]},e.id)})})]})};function k(e,t){return e.map(e=>{let n={dateLabel:C(e.date),dateFull:w(e.date)};for(let r of t)n[r.id]=e.values[r.id]??null;return n})}function A(e,t){let n=1/0,r=-1/0;for(let i of e)for(let e of t){let t=i.values[e.id];t!=null&&!Number.isNaN(t)&&(t<n&&(n=t),t>r&&(r=t))}if(!Number.isFinite(n)||!Number.isFinite(r))return[0,100];let i=Math.max((r-n)*.1,1),a=Math.max(0,Math.floor(n-i)),o=Math.min(100,Math.ceil(r+i));return a===o?[Math.max(0,a-1),Math.min(100,o+1)]:[a,o]}var j=[`#4142EF`,`#46464F`,`#FF8346`,`#DF57BC`,`#35BDAD`];const M=({points:e,variations:t,lineStyle:n,theme:r})=>{let p=k(e,t),[m,g]=A(e,t),_=r===`dark`,v=_?`#05082c`:`#ffffff`,y=_?`#e8eaed`:`#424242`,b=(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(d,{strokeDasharray:`4 4`,stroke:_?`#555555`:`#dddddd`}),(0,D.jsx)(o,{dataKey:`dateLabel`,tick:{fill:y},axisLine:{stroke:y},tickLine:{stroke:y}}),(0,D.jsx)(u,{domain:[m,g],tickFormatter:e=>S(e,0),tick:{fill:y},axisLine:{stroke:y},tickLine:{stroke:y}}),(0,D.jsx)(a,{content:e=>(0,D.jsx)(O,{...e,variations:t}),cursor:{stroke:_?`#9e9e9e`:`#bdbdbd`,strokeWidth:1}})]});if(n===`area`)return(0,D.jsx)(`div`,{className:T.chartWrapper,style:{backgroundColor:v},children:(0,D.jsx)(s,{width:`100%`,height:`100%`,children:(0,D.jsxs)(f,{data:p,margin:{top:16,right:24,bottom:16,left:8},children:[b,t.map((e,t)=>(0,D.jsx)(i,{type:`monotone`,dataKey:e.id,name:e.name,stroke:j[t%j.length],fill:j[t%j.length],fillOpacity:.18,strokeWidth:2,connectNulls:!1,activeDot:{r:3}},e.id))]})})});if(n===`highlight`)return(0,D.jsx)(`div`,{className:T.chartWrapper,style:{backgroundColor:v},children:(0,D.jsx)(s,{width:`100%`,height:`100%`,children:(0,D.jsxs)(c,{data:p,margin:{top:16,right:24,bottom:16,left:8},children:[b,t.map((e,t)=>{let n=j[t%j.length];return(0,D.jsxs)(h.Fragment,{children:[(0,D.jsx)(l,{type:`monotone`,dataKey:e.id,name:e.name,dot:!1,strokeWidth:20,stroke:n,strokeOpacity:.2,connectNulls:!1,isAnimationActive:!1}),(0,D.jsx)(l,{type:`monotone`,dataKey:e.id,name:e.name,dot:!1,strokeWidth:2,stroke:n,connectNulls:!1})]},e.id)})]})})});let x=n===`linear`?`linear`:n===`smooth`?`basis`:`monotone`;return(0,D.jsx)(`div`,{className:T.chartWrapper,style:{backgroundColor:v},children:(0,D.jsx)(s,{width:`100%`,height:`100%`,children:(0,D.jsxs)(c,{data:p,margin:{top:16,right:24,bottom:16,left:8},children:[b,t.map((e,t)=>(0,D.jsx)(l,{type:x,dataKey:e.id,name:e.name,dot:!1,strokeWidth:2,stroke:j[t%j.length],connectNulls:!1},e.id))]})})})};var N={root:`_root_1x4f6_1`,trigger:`_trigger_1x4f6_6`,chevron:`_chevron_1x4f6_23`,menu:`_menu_1x4f6_28`,menuItem:`_menuItem_1x4f6_41`};const P=({variations:e,selectedIds:t,onChange:n})=>{let[r,i]=(0,h.useState)(!1),a=(0,h.useMemo)(()=>t.length===e.length?`All variations selected`:t.length===1?e.find(e=>e.id===t[0])?.name??`1 variation selected`:`${t.length} variations selected`,[t,e]),o=e=>{if(t.includes(e)){if(t.length===1)return;n(t.filter(t=>t!==e))}else n([...t,e])};return(0,D.jsxs)(`div`,{className:N.root,children:[(0,D.jsxs)(`button`,{type:`button`,className:N.trigger,onClick:()=>i(e=>!e),children:[(0,D.jsx)(`span`,{children:a}),(0,D.jsx)(`span`,{className:N.chevron,children:`â–¾`})]}),r&&(0,D.jsx)(`div`,{className:N.menu,children:e.map(e=>{let n=t.includes(e.id);return(0,D.jsxs)(`label`,{className:N.menuItem,children:[(0,D.jsx)(`input`,{type:`checkbox`,checked:n,onChange:()=>o(e.id)}),(0,D.jsx)(`span`,{children:e.name})]},e.id)})})]})};var F={wrapper:`_wrapper_n23jh_1`,selectWrapper:`_selectWrapper_n23jh_5`,select:`_select_n23jh_5`,chevron:`_chevron_n23jh_25`};const I=({value:e,onChange:t})=>(0,D.jsx)(`div`,{className:F.wrapper,children:(0,D.jsxs)(`div`,{className:F.selectWrapper,children:[(0,D.jsxs)(`select`,{className:F.select,value:e,onChange:e=>t(e.target.value),children:[(0,D.jsx)(`option`,{value:`day`,children:`Day`}),(0,D.jsx)(`option`,{value:`week`,children:`Week`})]}),(0,D.jsx)(`span`,{className:F.chevron,children:`â–¾`})]})});var L={root:`_root_wr5tm_1`,trigger:`_trigger_wr5tm_6`,text:`_text_wr5tm_24`,textValue:`_textValue_wr5tm_28`,chevron:`_chevron_wr5tm_32`,menu:`_menu_wr5tm_37`,menuItem:`_menuItem_wr5tm_50`,menuItemActive:`_menuItemActive_wr5tm_65`},R=[{value:`linear`,label:`line`},{value:`smooth`,label:`smooth`},{value:`area`,label:`area`},{value:`highlight`,label:`highlight`}];const z=({value:e,onChange:t})=>{let[n,r]=(0,h.useState)(!1),i=R.find(t=>t.value===e)??R[0],a=e=>{t(e),r(!1)};return(0,D.jsxs)(`div`,{className:L.root,children:[(0,D.jsxs)(`button`,{type:`button`,className:L.trigger,onClick:()=>r(e=>!e),children:[(0,D.jsxs)(`span`,{className:L.text,children:[`Line style: `,(0,D.jsx)(`span`,{className:L.textValue,children:i.label})]}),(0,D.jsx)(`span`,{className:L.chevron,children:`â–¾`})]}),n&&(0,D.jsx)(`div`,{className:L.menu,children:R.map(t=>(0,D.jsx)(`button`,{type:`button`,className:`${L.menuItem} ${t.value===e?L.menuItemActive:``}`,onClick:()=>a(t.value),children:t.label},t.value))})]})};var B={wrapper:`_wrapper_vcpaz_1`,iconBase:`_iconBase_vcpaz_7`,fullscreen:`_fullscreen_vcpaz_23 _iconBase_vcpaz_7`,zoomGroup:`_zoomGroup_vcpaz_32`,zoomBtn:`_zoomBtn_vcpaz_40`,zoomPlus:`_zoomPlus_vcpaz_57`,reset:`_reset_vcpaz_63 _iconBase_vcpaz_7`,export:`_export_vcpaz_72`};const V=({onZoomIn:e,onZoomOut:t,onReset:n,onToggleFullscreen:r,onExport:i})=>(0,D.jsxs)(`div`,{className:B.wrapper,children:[(0,D.jsx)(`button`,{type:`button`,className:B.fullscreen,onClick:r,title:`Fullscreen`,children:`â›¶`}),(0,D.jsxs)(`div`,{className:B.zoomGroup,children:[(0,D.jsx)(`button`,{type:`button`,className:`${B.zoomBtn} ${B.zoomMinus}`,onClick:t,title:`Zoom out`,children:`âˆ’`}),(0,D.jsx)(`button`,{type:`button`,className:`${B.zoomBtn} ${B.zoomPlus}`,onClick:e,title:`Zoom in`,children:`+`})]}),(0,D.jsx)(`button`,{type:`button`,className:B.reset,onClick:n,title:`Reset zoom`,children:`â†»`}),i&&(0,D.jsx)(`button`,{type:`button`,className:B.export,onClick:i,title:`Export PNG`,children:`â¬‡ï¸Ž`})]});var H={app:`_app_eigek_1`,appFullscreen:`_appFullscreen_eigek_10`,appDark:`_appDark_eigek_16`,container:`_container_eigek_21`,containerFullscreen:`_containerFullscreen_eigek_36`,topBar:`_topBar_eigek_45`,topLeft:`_topLeft_eigek_53`,topRight:`_topRight_eigek_59`,chartSection:`_chartSection_eigek_65`},U={button:`_button_1qvub_1`,buttonDark:`_buttonDark_1qvub_18`,icon:`_icon_1qvub_24`,label:`_label_1qvub_28`};const W=({value:e,onChange:t})=>{let n=e===`dark`;return(0,D.jsxs)(`button`,{type:`button`,className:`${U.button} ${n?U.buttonDark:``}`,onClick:()=>t(n?`light`:`dark`),title:n?`Switch to light theme`:`Switch to dark theme`,children:[(0,D.jsx)(`span`,{className:U.icon,children:n?`ðŸŒ™`:`â˜€ï¸`}),(0,D.jsx)(`span`,{className:U.label,children:n?`Dark`:`Light`})]})};var G=x(g);function K(){let[e,t]=(0,h.useState)(`day`),[n,r]=(0,h.useState)(`smooth`),[i,a]=(0,h.useState)(()=>G.variations.map(e=>e.id)),[o,s]=(0,h.useState)(null),[c,l]=(0,h.useState)(!1),[u,d]=(0,h.useState)(`light`),f=(0,h.useRef)(null),m=(0,h.useMemo)(()=>e===`day`?G.dailyPoints:G.weeklyPoints,[e]),g=(0,h.useMemo)(()=>{if(!o)return m;let[e,t]=o;return m.slice(e,t+1)},[m,o]),_=(0,h.useMemo)(()=>G.variations.filter(e=>i.includes(e.id)),[i]);return(0,D.jsx)(`div`,{className:`${H.app} ${c?H.appFullscreen:``}`,children:(0,D.jsxs)(`div`,{className:`${H.container} ${c?H.containerFullscreen:``}`,children:[(0,D.jsxs)(`div`,{className:H.topBar,children:[(0,D.jsxs)(`div`,{className:H.topLeft,children:[(0,D.jsx)(P,{variations:G.variations,selectedIds:i,onChange:a}),(0,D.jsx)(I,{value:e,onChange:e=>{t(e),s(null)}})]}),(0,D.jsxs)(`div`,{className:H.topRight,children:[(0,D.jsx)(W,{value:u,onChange:d}),(0,D.jsx)(z,{value:n,onChange:r}),(0,D.jsx)(V,{onZoomIn:()=>{let e=m.length;if(e<=4)return;let t=o??[0,e-1],n=t[1]-t[0]+1;if(n<=4)return;let r=Math.max(4,Math.floor(n*.7)),i=(t[0]+t[1])/2,a=Math.round(i-r/2),c=a+r-1;a<0&&(a=0,c=r-1),c>=e&&(c=e-1,a=c-r+1),s([a,c])},onZoomOut:()=>{let e=m.length;if(e<=1)return;let t=o??[0,e-1],n=t[1]-t[0]+1;if(n>=e){s(null);return}let r=Math.min(e,Math.ceil(n*1.3)),i=(t[0]+t[1])/2,a=Math.round(i-r/2),c=a+r-1;a<0&&(a=0,c=r-1),c>=e&&(c=e-1,a=c-r+1),s(r===e?null:[a,c])},onReset:()=>s(null),onToggleFullscreen:()=>{l(e=>!e)},onExport:async()=>{if(f.current)try{let t=await p(f.current,{backgroundColor:u===`dark`?`#303134`:`#ffffff`}),n=document.createElement(`a`);n.href=t,n.download=`conversion-chart-${e}.png`,n.click()}catch(e){console.error(`Export failed`,e)}}})]})]}),(0,D.jsx)(`div`,{ref:f,className:H.chartSection,children:(0,D.jsx)(M,{points:g,variations:_,lineStyle:n,theme:u})})]})})}var q=K;(0,m.createRoot)(document.getElementById(`root`)).render((0,D.jsx)(h.StrictMode,{children:(0,D.jsx)(q,{})}));